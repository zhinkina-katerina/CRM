
{% extends 'base.html' %}
{% block title %}Заказы{% endblock %}
{% block header %}Последние заказы:{% endblock %}


{% block content %}
    {% load static %}
    <script src="{% static 'js/set_status_order.js' %}"></script>
    {% for order in orders %}
<div class="row" style="margin:0px;padding:20px;">

                    <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-4 d-xl-flex justify-content-xl-center align-items-xl-center" style="padding: 0px;background-color: rgba(109,40,170,0.19);">
                        <img class="img-thumbnail d-xl-flex justify-content-xl-center align-items-xl-center" src="{{ order.picture }}" style="padding: -15px;margin: 0;">
                    </div>

                    <div class="w-100 d-sm-block d-md-none d-lg-none d-xl-none"></div>
                    <div class="col" style="padding:0px;">
                        <div class="card">
                            <div class="card-body" style="height:50vh;">
                                <h4 class="card-title"><a href="{% url 'order_details' id=order.prom_id %}">Заказ № {{ order.prom_id }}</a></h4>
                                <h6 class="text-muted card-subtitle mb-2">{{ order.payment_name }}</h6>

                            <form method="get" id="statusForm" >
                                {% csrf_token %}
                                {{ order.form_status }}
                                <input type="hidden" value="{{ order.prom_id }}" name="prom_id" id="prom_id">
                            </form>

                                <hr>
                                <p class="card-text">{{ order.customer }}</p>
                                <p class="card-text">{{ order.customer.phone_number }}</p>
                                {% for delivery in order.delivery.values %}
                                <p class="card-text">{{ delivery.city }}</p>
                                <p class="card-text">Отеделение {{ delivery.post_office_number }}</p>
                                <p class="card-text">Статус доставки: {{ delivery.status_of_delivery }}</p>
                                {% endfor %}
                                {% if order.products|length > 1 %}
                                    {% if order.products|length < 5 %}
                                <p class="alert-warning">В заказе {{ order.products|length }} товара</p>
                                    {% else %}
                                        <p class="alert-warning">В заказе {{ order.products|length }} товаров</p>
                                        {% endif %}
                                {% endif %}

                        </div>
                    </div>

                </div>
        </div>
    {% endfor %}
{% endblock %}